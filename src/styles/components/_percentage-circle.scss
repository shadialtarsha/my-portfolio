@function circular-progress($maxPercent, $percent, $color-bar, $color-back) {
    $increment: 360 / $maxPercent;
    $half: round($maxPercent / 2);
    $background-image: '';
    @if $percent < $half {
        $nextdeg: 90deg + ($increment * $percent);
        $background-image: 'linear-gradient(90deg, #{$color-back} 50%, transparent 50%, transparent),
        linear-gradient(#{$nextdeg}, #{$color-bar} 50%, #{$color-back} 50%, #{$color-back})';
    }
    @else {
        $nextdeg: -90deg + ($increment * ($percent - $half));
        $background-image: 'linear-gradient(#{$nextdeg}, #{$color-bar} 50%, transparent 50%, transparent),
        linear-gradient(270deg, #{$color-bar} 50%, #{$color-back} 50%, #{$color-back})';
    }
    @return unquote($background-image);
}

.circle{
    border-radius: 50%;
    box-shadow: 0 .2rem .5rem 0 rgba(0, 0, 0, 0.16), 0 .2rem 1rem 0 rgba(0, 0, 0, 0.12);
    position: relative;
    width: 10rem;
    height: 10rem;
    margin: 1rem;
    &::before {
        background-color: #FAFAFA;
        border-radius: 50%;
        box-shadow: 0 .2rem .5rem 0 rgba(0, 0, 0, 0.16), 0 .2rem 1rem 0 rgba(0, 0, 0, 0.12);
        color: rgba(black, .54);
        content: '0%';
        font-size: 3.2rem;
        font-weight: bold;
        font-family: $montserrat;
        text-align: center;
        left: 0;
        line-height: 10rem;
        position: absolute;
        top: 0;
        transform: scale(.87);
        height: 100%;
        width: 100%;
    }
}

@mixin circular-progress($percent-num, $color1:"#03A9F4") {
    background: circular-progress(100, 0, $color1, #E0E0E0);
    animation: animated-circle .7s ease-in-out .2s forwards;
    @include keyframesForCircle($percent-num);
} 

@mixin keyframesForCircle($percent){
    @keyframes animated-circle#{$percent} {
        @for $i from 0 through 10{
            #{$i * 10%}{
                background: circular-progress(100, ($percent/100)*($i*10), $sky-color, #E0E0E0);
            }
        }
    }
}

@mixin keyframesForPercent($percent){
    @keyframes animated-percent#{$percent} {
        @for $i from 0 through 10{
            #{$i * 10%}{
                content: '#{round(($percent/100) * ($i*10))}%';
            }
        }
    }
}

.content {
    display: flex;
    flex-flow: row wrap;
    justify-content: center;
    width: 33.33%;
    @media (min-width: $medium-device) {
        width: 25%;
    }
    @media (min-width: $large-device) {
        width: 20%;
    }
    @media (min-width: $xlarge-device) {
        width: calc(100%/7);
    }
}
 
.group {
    .circular-progress65 {
        @include circular-progress(65, $primary-color);
        animation: animated-circle65 0.5s ease-in-out .5s forwards;
        @include keyframesForCircle(65);
        &::before{
            animation: animated-percent65 0.5s ease-in-out .5s forwards;
            @include keyframesForPercent(65);
        }
        @supports (-ms-ime-align: auto) {
            animation: none;
            background: circular-progress(100, 65, $primary-color, #E0E0E0);
            &::before {
                  content: '65%';
            }
        }
        @media screen and (-ms-high-contrast: active), screen and (-ms-high-contrast: none) {  
            animation: none;
            background: circular-progress(100, 65, $primary-color, #E0E0E0);
            &::before {
                  content: '65%';
            }
        }
    }
    .circular-progress70 {
        @include circular-progress(70, $primary-color);
        animation: animated-circle70 0.5s ease-in-out .5s forwards;
        @include keyframesForCircle(70);
        &::before{
            animation: animated-percent70 0.5s ease-in-out .5s forwards;
            @include keyframesForPercent(70);
        }
        @supports (-ms-ime-align: auto) {
            animation: none;
            background: circular-progress(100, 70, $primary-color, #E0E0E0);
            &::before {
                  content: '70%';
            }
        }
        @media screen and (-ms-high-contrast: active), screen and (-ms-high-contrast: none) {  
            animation: none;
            background: circular-progress(100, 70, $primary-color, #E0E0E0);
            &::before {
                  content: '70%';
            }
        }
    }
    .circular-progress75 {
        @include circular-progress(75, $primary-color);
        animation: animated-circle75 0.5s ease-in-out .5s forwards;
        @include keyframesForCircle(75);
        &::before{
            animation: animated-percent75 0.5s ease-in-out .5s forwards;
            @include keyframesForPercent(75);
        }
        @supports (-ms-ime-align: auto) {
            animation: none;
            background: circular-progress(100, 75, $primary-color, #E0E0E0);
            &::before {
                  content: '75%';
            }
        }
        @media screen and (-ms-high-contrast: active), screen and (-ms-high-contrast: none) {  
            animation: none;
            background: circular-progress(100, 75, $primary-color, #E0E0E0);
            &::before {
                  content: '75%';
            }
        }
    }
    .circular-progress80 {
        @include circular-progress(80, $primary-color);
        animation: animated-circle80 0.5s ease-in-out .5s forwards;
        @include keyframesForCircle(80);
        &::before{
            animation: animated-percent80 0.5s ease-in-out .5s forwards;
            @include keyframesForPercent(80);
        }
        @supports (-ms-ime-align: auto) {
            animation: none;
            background: circular-progress(100, 80, $primary-color, #E0E0E0);
            &::before {
                  content: '80%';
            }
        }
        @media screen and (-ms-high-contrast: active), screen and (-ms-high-contrast: none) {  
            animation: none;
            background: circular-progress(100, 80, $primary-color, #E0E0E0);
            &::before {
                  content: '80%';
            }
        }
    }
    .circular-text {
        font-family: $montserrat;
        text-align: center;
        color: $title-color;
    }
}